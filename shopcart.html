<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simple Shopping Cart</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
    }
    h1, h2 {
        text-align: center;
    }
    .container {
        max-width: 800px;
        margin: auto;
    }
    .products, .cart {
        background: white;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    .product, .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    .product button, .cart-item button {
        padding: 5px 10px;
        cursor: pointer;
        border: none;
        background: #007bff;
        color: white;
        border-radius: 4px;
    }
    .cart-item button.remove {
        background: #dc3545;
    }
    .qty-controls {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .qty-controls button {
        width: 24px;
        height: 24px;
        padding: 0;
        font-weight: bold;
    }
    .total {
        text-align: right;
        font-weight: bold;
        margin-top: 10px;
    }
</style>
</head>
<body>

<div class="container">
<h1>Shopping Cart</h1>

<div class="products">
    <h2>Products</h2>

    <div class="product">
        <span>Product A — ₹100</span>
        <button onclick="addToCart('product-a', 'Product A', 100)">Add to Cart</button>
    </div>

    <div class="product">
        <span>Product B — ₹200</span>
        <button onclick="addToCart('product-b', 'Product B', 200)">Add to Cart</button>
    </div>

    <div class="product">
        <span>Product C — ₹300</span>
        <button onclick="addToCart('product-c', 'Product C', 300)">Add to Cart</button>
    </div>
</div>

<div class="cart">
    <h2>Your Cart</h2>
    <div id="cartItems"></div>
    <div class="total">Total: ₹<span id="total">0</span></div>
</div>
</div>

<script>
/* --- cart logic --- */

// Try to load existing cart from localStorage, else start empty
let cart = {};
if (localStorage.getItem('cart')) {
    try {
        cart = JSON.parse(localStorage.getItem('cart'));
    } catch (e) {
        cart = {};
    }
}

function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

function addToCart(id, title, price) {
    if (cart[id]) {
        cart[id].qty++;
    } else {
        cart[id] = { title, price, qty: 1 };
    }
    saveCart();
    renderCart();
}

function removeItem(id) {
    delete cart[id];
    saveCart();
    renderCart();
}

function changeQty(id, delta) {
    if (!cart[id]) return;
    cart[id].qty += delta;
    if (cart[id].qty <= 0) {
        delete cart[id];
    }
    saveCart();
    renderCart();
}

function renderCart() {
    const cartItemsEl = document.getElementById('cartItems');
    const totalEl = document.getElementById('total');

    cartItemsEl.innerHTML = '';
    let total = 0;

    for (const id in cart) {
        const item = cart[id];
        total += item.price * item.qty;

        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';

        // item label
        const label = document.createElement('span');
        label.textContent = `${item.title}`;
        itemDiv.appendChild(label);

        // qty controls
        const qtyCtrl = document.createElement('div');
        qtyCtrl.className = 'qty-controls';
        const minusBtn = document.createElement('button');
        minusBtn.textContent = '−';
        minusBtn.onclick = () => changeQty(id, -1);
        const qtySpan = document.createElement('span');
        qtySpan.textContent = item.qty;
        const plusBtn = document.createElement('button');
        plusBtn.textContent = '+';
        plusBtn.onclick = () => changeQty(id, 1);
        qtyCtrl.appendChild(minusBtn);
        qtyCtrl.appendChild(qtySpan);
        qtyCtrl.appendChild(plusBtn);
        itemDiv.appendChild(qtyCtrl);

        // subtotal
        const subtotal = document.createElement('span');
        subtotal.textContent = `₹${item.price * item.qty}`;
        itemDiv.appendChild(subtotal);

        // remove
        const remBtn = document.createElement('button');
        remBtn.textContent = 'Remove';
        remBtn.className = 'remove';
        remBtn.onclick = () => removeItem(id);
        itemDiv.appendChild(remBtn);

        cartItemsEl.appendChild(itemDiv);
    }

    totalEl.textContent = total;
}

// initial render
renderCart();
</script>

</body>
</html>
